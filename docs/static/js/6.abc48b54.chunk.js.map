{"version":3,"sources":["hooks/useDocumentTitle.ts","assets/logo.svg","assets/left.svg","assets/right.svg","unauthenticated-app/style.ts","unauthenticated-app/register.tsx","unauthenticated-app/login.tsx","unauthenticated-app/index.tsx"],"names":["useDocumentTitle","title","keepOnUnmount","oldTitle","useRef","document","current","useEffect","LongButton","styled","Button","Title","h2","Background","div","left","right","Header","header","logo","ShadowCard","Card","Container","RegisterScreen","onError","register","useAuth","useAsync","undefined","throwOnError","run","isLoading","handleSubmit","a","cpassword","values","password","Error","onFinish","Item","name","rules","required","message","placeholder","type","id","loading","htmlType","LoginScreen","login","UnauthenticatedApp","useState","isRegister","setIsRegister","error","setError","clearTimeout","setTimeout","onClick"],"mappings":"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","file":"static/js/6.abc48b54.chunk.js","sourcesContent":["import { useEffect, useRef } from \"react\";\n\nexport const useDocumentTitle = (title: string, keepOnUnmount = true) => {\n  const oldTitle = useRef(document.title).current;\n  useEffect(() => {\n    document.title = title;\n  }, [title]);\n\n  useEffect(() => {\n    return () => {\n      if (!keepOnUnmount) {\n        document.title = oldTitle;\n      }\n    };\n  }, [keepOnUnmount, oldTitle]);\n};\n","export default __webpack_public_path__ + \"static/media/logo.6c866125.svg\";","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.b423a6cf.svg\";","import styled from \"@emotion/styled\";\nimport logo from \"assets/logo.svg\";\nimport left from \"assets/left.svg\";\nimport right from \"assets/right.svg\";\nimport { Button, Card } from \"antd\";\n\nexport const LongButton = styled(Button)`\n  width: 100%;\n`;\n\nexport const Title = styled.h2`\n  margin-bottom: 2.4rem;\n  color: rgb(94, 108, 132);\n`;\n\nexport const Background = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: left bottom, right bottom;\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\n  background-image: url(${left}), url(${right});\n`;\n\nexport const Header = styled.header`\n  background: url(${logo}) no-repeat center;\n  padding: 5rem 0;\n  background-size: 8rem;\n  width: 100%;\n`;\n\nexport const ShadowCard = styled(Card)`\n  width: 40rem;\n  min-height: 56rem;\n  padding: 3.2rem 4rem;\n  border-radius: 0.3rem;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  text-align: center;\n`;\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n`;\n","import React, { FC } from \"react\";\nimport { useAuth } from \"hooks/useAuth\";\nimport { Form, Input } from \"antd\";\nimport { LongButton } from \"./style\";\nimport useAsync from \"hooks/useAsync\";\n\ninterface RegisterProps {\n  onError: (error: Error) => void;\n}\n\nexport const RegisterScreen: FC<RegisterProps> = ({ onError }) => {\n  const { register } = useAuth();\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\n  const handleSubmit = async ({\n    cpassword,\n    ...values\n  }: {\n    username: string;\n    password: string;\n    cpassword: string;\n  }) => {\n    if (cpassword !== values.password) {\n      onError(new Error(\"请确认两次输入的密码相同\"));\n      return;\n    }\n    try {\n      await run(register(values));\n    } catch (e) {\n      onError(e);\n    }\n  };\n  return (\n    <Form onFinish={handleSubmit}>\n      <Form.Item\n        name={\"username\"}\n        rules={[{ required: true, message: \"请输入用户名\" }]}\n      >\n        <Input placeholder={\"用户名\"} type=\"text\" id={\"username\"} />\n      </Form.Item>\n      <Form.Item\n        name={\"password\"}\n        rules={[{ required: true, message: \"请输入密码\" }]}\n      >\n        <Input placeholder={\"密码\"} type=\"password\" id={\"password\"} />\n      </Form.Item>\n      <Form.Item\n        name={\"cpassword\"}\n        rules={[{ required: true, message: \"请确认密码\" }]}\n      >\n        <Input placeholder={\"确认密码\"} type=\"password\" id={\"cpassword\"} />\n      </Form.Item>\n      <Form.Item>\n        <LongButton loading={isLoading} htmlType={\"submit\"} type={\"primary\"}>\n          注册\n        </LongButton>\n      </Form.Item>\n    </Form>\n  );\n};\n","import React, { FC } from \"react\";\nimport { Form, Input } from \"antd\";\nimport { LongButton } from \"./style\";\nimport useAsync from \"hooks/useAsync\";\nimport { useAuth } from \"hooks/useAuth\";\n\ninterface LoginProps {\n  onError: (error: Error) => void;\n}\n\nexport const LoginScreen: FC<LoginProps> = ({ onError }) => {\n  const { login } = useAuth();\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\n\n  const handleSubmit = async (values: {\n    username: string;\n    password: string;\n  }) => {\n    try {\n      await run(login(values));\n    } catch (e) {\n      onError(e);\n    }\n  };\n\n  return (\n    <Form onFinish={handleSubmit}>\n      <Form.Item\n        name={\"username\"}\n        rules={[{ required: true, message: \"请输入用户名\" }]}\n      >\n        <Input placeholder={\"用户名\"} type=\"text\" id={\"username\"} />\n      </Form.Item>\n      <Form.Item\n        name={\"password\"}\n        rules={[{ required: true, message: \"请输入密码\" }]}\n      >\n        <Input placeholder={\"密码\"} type=\"password\" id={\"password\"} />\n      </Form.Item>\n      <Form.Item>\n        <LongButton loading={isLoading} htmlType={\"submit\"} type={\"primary\"}>\n          登录\n        </LongButton>\n      </Form.Item>\n    </Form>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { RegisterScreen } from \"./register\";\nimport { LoginScreen } from \"./login\";\nimport { useDocumentTitle } from \"hooks/useDocumentTitle\";\nimport { Divider, Button } from \"antd\";\nimport { ErrorBox } from \"components/lib\";\nimport { Container, Header, Background, ShadowCard, Title } from \"./style\";\n\nexport const UnauthenticatedApp = () => {\n  const [isRegister, setIsRegister] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  useDocumentTitle(\"请登录注册以继续\");\n\n  // 切换登录条件，清空报错信息\n  useEffect(() => {\n    setError(null);\n  }, [isRegister]);\n\n  // 2s后清空报错信息\n  useEffect(() => {\n    let timer: any = null;\n    clearTimeout(timer);\n    setTimeout(setError, 2000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [error]);\n\n  return (\n    <Container>\n      <Header />\n      <Background />\n      <ShadowCard>\n        <Title>{isRegister ? \"请注册\" : \"请登录\"}</Title>\n        <ErrorBox error={error} />\n        {isRegister ? (\n          <RegisterScreen onError={setError} />\n        ) : (\n          <LoginScreen onError={setError} />\n        )}\n        <Divider />\n        <Button type={\"link\"} onClick={() => setIsRegister(!isRegister)}>\n          {isRegister ? \"已经有账号了？直接登录\" : \"没有账号？注册新账号\"}\n        </Button>\n      </ShadowCard>\n    </Container>\n  );\n};\n\nexport default UnauthenticatedApp;\n"],"sourceRoot":""}